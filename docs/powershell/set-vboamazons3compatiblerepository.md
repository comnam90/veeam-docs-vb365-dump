---
title: "Set-VBOAmazonS3CompatibleRepository"
product: "vb365"
doc_type: "powershell"
source_url: "https://helpcenter.veeam.com/docs/vbo365/powershell/set-vboamazons3compatiblerepository.html"
last_updated: "12/9/2025"
product_version: "8.3.0.2201"
---

  + [VBOAmazonSubnet](vboamazonsubnet.html "VBOAmazonSubnet")
  + [VBOAmazonVpc](vboamazonvpc.html "VBOAmazonVpc")
  + [VBOApplication](vboapplication.html "VBOApplication")
  + [VBOApplicationOnlyConnectionSettings](vboapplicationonlyconnectionsettings.html "VBOApplicationOnlyConnectionSettings")
  + [VBOAzureArchiverAppliance](vboazurearchiverappliance.html "VBOAzureArchiverAppliance")
  + [VBOAzureBlobAccount](vboazureblobaccount.html "VBOAzureBlobAccount")
  + [VBOAzureBlobConnectionSettings](vboazureblobconnectionsettings.html "VBOAzureBlobConnectionSettings")
  + [VBOAzureBlobContainer](vboazureblobcontainer.html "VBOAzureBlobContainer")
  + [VBOAzureBlobFolder](vboazureblobfolder.html "VBOAzureBlobFolder")
  + [VBOAzureBlobObjectStorageApplianceInfo](vboazureblobobjectstorageapplianceinfo.html "VBOAzureBlobObjectStorageApplianceInfo")
  + [VBOAzureBlobObjectStorageRepository](vboazureblobobjectstoragerepository.html "VBOAzureBlobObjectStorageRepository")
  + [VBOAzureLocation](vboazurelocation.html "VBOAzureLocation")
  + [VBOAzureResourceGroup](vboazureresourcegroup.html "VBOAzureResourceGroup")
  + [VBOAzureServiceAccount](vboazureserviceaccount.html "VBOAzureServiceAccount")
  + [VBOAzureSubnet](vboazuresubnet.html "VBOAzureSubnet")
  + [VBOAzureSubscription](vboazuresubscription.html "VBOAzureSubscription")
  + [VBOAzureVirtualMachineSize](vboazurevirtualmachinesize.html "VBOAzureVirtualMachineSize")
  + [VBOAzureVirtualNetwork](vboazurevirtualnetwork.html "VBOAzureVirtualNetwork")
  + [VBOBackupAccount](vbobackupaccount.html "VBOBackupAccount")
  + [VBOBackupApplication](vbobackupapplication.html "VBOBackupApplication")
  + [VBOBackupDistributionGroup](vbobackupdistributiongroup.html "VBOBackupDistributionGroup")
  + [VBOBackupDynamicDistributionGroup](vbobackupdynamicdistributiongroup.html "VBOBackupDynamicDistributionGroup")
  + [VBOBackupGroup](vbobackupgroup.html "VBOBackupGroup")
  + [VBOBackupItem](vbobackupitem.html "VBOBackupItem")
  + [VBOBackupO365Group](vbobackupo365group.html "VBOBackupO365Group")
  + [VBOBackupOrganization](vbobackuporganization.html "VBOBackupOrganization")
  + [VBOBackupPersonalSites](vbobackuppersonalsites.html "VBOBackupPersonalSites")
  + [VBOBackupPublicMailbox](vbobackuppublicmailbox.html "VBOBackupPublicMailbox")
  + [VBOBackupSecurityGroup](vbobackupsecuritygroup.html "VBOBackupSecurityGroup")
  + [VBOBackupSharedMailbox](vbobackupsharedmailbox.html "VBOBackupSharedMailbox")
  + [VBOBackupSite](vbobackupsite.html "VBOBackupSite")
  + [VBOBackupTeam](vbobackupteam.html "VBOBackupTeam")
  + [VBOBackupUser](vbobackupuser.html "VBOBackupUser")
  + [VBOBackupWindowSettings](vbobackupwindowsettings.html "VBOBackupWindowSettings")
  + [VBOCopyJob](vbocopyjob.html "VBOCopyJob")
  + [VBOCopyJobSchedulePolicy](vbocopyjobschedulepolicy.html "VBOCopyJobSchedulePolicy")
  + [VBODataRetrieval](vbodataretrieval.html "VBODataRetrieval")
  + [VBODataRetrievalSession](vbodataretrievalsession.html "VBODataRetrievalSession")
  + [VBOEmailSettings](vboemailsettings.html "VBOEmailSettings")
  + [VBOEncryptionKey](vboencryptionkey.html "VBOEncryptionKey")
  + [VBOExchangeOnPremConnectionSettings](vboexchangeonpremconnectionsettings.html "VBOExchangeOnPremConnectionSettings")
  + [VBOFederatedAuthenticationAuthority](vbofederatedauthenticationauthority.html "VBOFederatedAuthenticationAuthority")
  + [VBOFolderExclusions](vbofolderexclusions.html "VBOFolderExclusions")
  + [VBOGlobalRetentionExclusion](vboglobalretentionexclusion.html "VBOGlobalRetentionExclusion")
  + [VBOHistorySettings](vbohistorysettings.html "VBOHistorySettings")
  + [VBOInternetProxySettings](vbointernetproxysettings.html "VBOInternetProxySettings")
  + [VBOJob](vbojob.html "VBOJob")
  + [VBOJobSchedulePolicy](vbojobschedulepolicy.html "VBOJobSchedulePolicy")
  + [VBOJobSession](vbojobsession.html "VBOJobSession")
  + [VBOJobStatistics](vbojobstatistics.html "VBOJobStatistics")
  + [VBOLicense](vbolicense.html "VBOLicense")
  + [VBOLicensedUser](vbolicenseduser.html "VBOLicensedUser")
  + [VBOLicensingOptions](vbolicensingoptions.html "VBOLicensingOptions")
  + [VBOLinuxCredential](vbolinuxcredential.html "VBOLinuxCredential")
  + [VBOObjectStorageRepository](vboobjectstoragerepository.html "VBOObjectStorageRepository")
  + [VBOOffice365ConnectionSettings](vbooffice365connectionsettings.html "VBOOffice365ConnectionSettings")
  + [VBOOffice365LegacyConnectionSettings](vbooffice365legacyconnectionsettings.html "VBOOffice365LegacyConnectionSettings")
  + [VBOOfficeLicense](vboofficelicense.html "VBOOfficeLicense")
  + [VBOOnPremConnectionSettings](vboonpremconnectionsettings.html "VBOOnPremConnectionSettings")
  + [VBOOperatorRole](vbooperatorrole.html "VBOOperatorRole")
  + [VBOOrganization](vboorganization.html "VBOOrganization")
  + [VBOOrganizationGroup](vboorganizationgroup.html "VBOOrganizationGroup")
  + [VBOOrganizationGroupMember](vboorganizationgroupmember.html "VBOOrganizationGroupMember")
  + [VBOOrganizationRetentionExclusion](vboorganizationretentionexclusion.html "VBOOrganizationRetentionExclusion")
  + [VBOOrganizationSite](vboorganizationsite.html "VBOOrganizationSite")
  + [VBOOrganizationSynchronizationState](vboorganizationsynchronizationstate.html "VBOOrganizationSynchronizationState")
  + [VBOOrganizationTeam](vboorganizationteam.html "VBOOrganizationTeam")
  + [VBOOrganizationUser](vboorganizationuser.html "VBOOrganizationUser")
  + [VBOProxy](vboproxy.html "VBOProxy")
  + [VBOProxyInternetProxySettings](vboproxyinternetproxysettings.html "VBOProxyInternetProxySettings")
  + [VBOProxyPool](vboproxypool.html "VBOProxyPool")
  + [VBORbacGroup](vborbacroleitem_2.html "VBORbacGroup")
  + [VBORbacOperator](vborbacoperator.html "VBORbacOperator")
  + [VBORbacOrganizationRoleItem](vborbacorganizationroleitem.html "VBORbacOrganizationRoleItem")
  + [VBORbacPersonalSites](vborbacpersonalsites.html "VBORbacPersonalSites")
  + [VBORbacRoleItem](vborbacroleitem.html "VBORbacRoleItem")
  + [VBORbacSite](vborbacsite.html "VBORbacSite")
  + [VBORbacTeam](vborbacteam.html "VBORbacTeam")
  + [VBORbacUser](vborbacuser.html "VBORbacUser")
  + [VBORepositoriesOwnerChangeSession](vborepositoriesownerchangesession.html "VBORepositoriesOwnerChangeSession")
  + [VBORepository](vborepository.html "VBORepository")
  + [VBORepositorySynchronizeSession](vborepositorysynchronizesession.html "VBORepositorySynchronizeSession")
  + [VBORepositoryUpgradeSession](vborepositoryupgradesession.html "VBORepositoryUpgradeSession")
  + [VBORestAPISettings](vborestapisettings.html "VBORestAPISettings")
  + [VBORestoreLogItem](vborestorelogitem.html "VBORestoreLogItem")
  + [VBORestorePoint](vborestorepoint.html "VBORestorePoint")
  + [VBORestorePortalSettings](vborestoreportalsettings.html "VBORestorePortalSettings")
  + [VBORestoreSession](vborestoresession.html "VBORestoreSession")
  + [VBOS3Account](vbos3account.html "VBOS3Account")
  + [VBOS3ConnectionSettings](vbos3connectionsettings.html "VBOS3ConnectionSettings")
  + [VBOSecuritySettings](vbosecuritysettings.html "VBOSecuritySettings")
  + [VBOServer](vboserver.html "VBOServer")
  + [VBOServerComponent](vboservercomponent.html "VBOServerComponent")
  + [VBOSharePointOnPremConnectionSettings](vbosharepointonpremconnectionsettings.html "VBOSharePointOnPremConnectionSettings")
  + [VBOTenantAuthenticationSettings](vbotenantauthenticationsettings.html "VBOTenantAuthenticationSettings")
  + [VBOUsageData](vbousagedata.html "VBOUsageData")
  + [VBOVersion](vboversion.html "VBOVersion")
* [Veeam Backup for Microsoft 365 PowerShell Changelog](ps_changelog.html "Veeam Backup for Microsoft 365 PowerShell Changelog")
  + [v8 Changelog](changelog.html "v8 Changelog")
    - [New and Updated Cmdlets](new_updated_cmdlets.html "New and Updated Cmdlets")
    - [Deprecated Cmdlets](deprecated_cmdlets.html "Deprecated Cmdlets")
  + [v8.1 Changelog](changelog_81.html "v8.1 Changelog")
  + [v8.1.1 Changelog](changelog_811.html "v8.1.1 Changelog")
  + [v8.2 Changelog](changelog_82.html "v8.2 Changelog")
  + [v8.3 Changelog](changelog_83.html "v8.3 Changelog")

>[PowerShell Reference](https://helpcenter.veeam.com/docs/vbo365/powershell/)>[Veeam Backup for Microsoft 365 PowerShell Reference](./veeam_psreference.md)>[Backup Infrastructure](./backup_infrastructure.md)>[JET-based Backup Repositories and Object Storage Repositories](./repositories.md)>Set-VBOAmazonS3CompatibleRepository

# Set-VBOAmazonS3CompatibleRepository


Short Description

Modifies settings of S3 Compatible object storage repository.

Syntax

This cmdlet provides parameter sets that allow you to:

* Modify S3 Compatible object storage repository with retention period measured in years.

|  |
| --- |
| Set-VBOAmazonS3CompatibleRepository [-TrustServerCertificate] [-EnableSizeLimit] [-SizeLimit <UInt64>] [-EnableDefragmentation] [-ImmutabilityPeriodDays <Int32>] -Repository <VBORepository> [-Name <String>] [-Description <String>] [-RetentionPeriod <VBORetentionPeriod>] [-RetentionFrequencyType <VBORetentionFrequencyType>] [-DailyTime <TimeSpan>] [-DailyType <VBODailyType>] [-MonthlyTime <TimeSpan>] [-MonthlyDayNumber <VBOMonthlyDayNumber>] [-MonthlyDayOfWeek <DayOfWeek>] [<CommonParameters>] |

* Modify S3 Compatible object storage repository with retention period measured in months or days.

|  |
| --- |
| Set-VBOAmazonS3CompatibleRepository [-TrustServerCertificate] [-EnableSizeLimit] [-SizeLimit <UInt64>] [-EnableDefragmentation] [-ImmutabilityPeriodDays <Int32>] -Repository <VBORepository> [-Name <String>] [-Description <String>] [-CustomRetentionPeriodType <VBORetentionPeriodType>] [-CustomRetentionPeriod <Int32>] [-RetentionFrequencyType <VBORetentionFrequencyType>] [-DailyTime <TimeSpan>] [-DailyType <VBODailyType>] [-MonthlyTime <TimeSpan>] [-MonthlyDayNumber <VBOMonthlyDayNumber>] [-MonthlyDayOfWeek <DayOfWeek>] [<CommonParameters>] |

Detailed Description

This cmdlet modifies settings of S3 Compatible object storage repository added to the Veeam Backup for Microsoft 365 infrastructure. To modify settings, you need to enter the necessary parameters with new values. The parameters that you omit will remain unchanged.

Parameters

| Parameter | Description | Type | Required | Position | Accept Pipeline Input |
| --- | --- | --- | --- | --- | --- |
| TrustServerCertificate | Defines that Veeam Backup for Microsoft 365 will trust S3 Compatible self-signed certificates.  If you omit this parameter, Veeam Backup for Microsoft 365 will not trust S3 Compatible self-signed certificates.  Default: False | SwitchParameter | False | Named | False |
| EnableSizeLimit | Defines that the cmdlet will enable a soft limit in GB for the object storage repository consumption that can be exceeded temporarily.  Use the SizeLimit parameter to specify the soft limit value.  Default: False | SwitchParameter | False | Named | False |
| SizeLimit | For the EnableSizeLimit option.  Specifies a soft limit in GB for the object storage repository consumption that can be exceeded temporarily. If the specified limit is exceeded, Veeam Backup for Microsoft 365 will not run a new job.  Permitted values: 1024â€“1073741824.  Default: 1024  Note: In PowerShell you can specify a soft limit in GB only. | UInt64 | False | Named | False |
| EnableDefragmentation | Defines that the cmdlet will enable defragmentation for the specified S3 Compatible object storage repository. After applying the retention policy, Veeam Backup for Microsoft 365 will start merging small blobs of data into a bigger one.  Default: False | SwitchParameter | False | Named | False |
| ImmutabilityPeriodDays | Specifies the number of days when your data will be blocked for deletion or modification.  Note: If you set the null or 0 value, data will be blocked for deletion or modification for the same period as the retention period. | Int32 | False | Named | False |
| Repository | Specifies S3 Compatible object storage repository. The cmdlet will modify settings of this object storage repository. | Accepts the [VBORepository](vborepository.md) object.  To get this object, run the [Get-VBORepository](get-vborepository.md) cmdlet. | True | Named | True (ByValue) |
| Name | Specifies a name of S3 Compatible object storage repository. The cmdlet will change the name of this object storage repository. | String | False | Named | False |
| Description | Specifies a description of S3 Compatible object storage repository. The cmdlet will replace the current description with the specified description. | String | False | Named | False |
| RetentionPeriod | Specifies the retention period in years. Veeam Backup for Microsoft 365 will remove items from the object storage repository once this period is passed. You can set either of the following periods:   * Year1 * Years2 * Years3 * Years5 * Years7 * Years10 * Years25 * KeepForever   Default: Years3  Note: Apply the CustomRetentionPeriodType parameter to set the retention period in months or days. | VBORetentionPeriod | False | Named | False |
| RetentionFrequencyType | Specifies retention policy schedule. Veeam Backup for Microsoft 365 will check the object storage repository and will remove the outdated backups according to this schedule. You can set either of the following types of schedule:   * Daily: to check and remove the outdated backups once a day. * Monthly: to check and remove the outdated backups once a month.   Default: Daily | VBORetentionFrequencyType | False | Named | False |
| DailyTime | For daily retention policy schedule.  Specifies the time of the day when Veeam Backup for Microsoft 365 must apply the retention policy.  Default: 00:00:00 | TimeSpan | False | Named | False |
| DailyType | For daily retention policy schedule.  Specifies the days when Veeam Backup for Microsoft 365 must apply the retention policy:   * Sunday * Monday * Tuesday * Wednesday * Thursday * Friday * Saturday * Everyday * Workdays * Weekends   Default: Everyday | VBODailyType | False | Named | False |
| MonthlyTime | For monthly retention policy schedule.  Specifies the time of the day when Veeam Backup for Microsoft 365 must apply the retention policy.  Default: 18:00:00 | TimeSpan | False | Named | False |
| MonthlyDayNumber | For monthly retention policy schedule.  Specifies the order number for the day of the week when Veeam Backup for Microsoft 365 must apply the retention policy.   * First * Second * Third * Fourth * Last   Default: First | VBOMonthlyDayNumber | False | Named | False |
| MonthlyDayOfWeek | For monthly retention policy schedule.  Specifies the day of the week when Veeam Backup for Microsoft 365 must apply the retention policy.   * Sunday * Monday * Tuesday * Wednesday * Thursday * Friday * Saturday   Default: Monday | DayOfWeek | False | Named | False |
| CustomRetentionPeriodType | Specifies a type of custom retention period. Veeam Backup for Microsoft 365 will remove items from the object storage repository once this period is passed. You can set the custom retention period to either of the following types:   * Months * Days   Set the CustomRetentionPeriod parameter to specify the number of days or the number of months. | VBORetentionPeriodType | False | Named | False |
| CustomRetentionPeriod | For the CustomRetentionPeriodType option.  Specifies the retention period to keep data on the object storage repository. The retention period is defined according to the CustomRetentionPeriod settings:   * Sets the retention period to the number of months if the CustomRetentionPeriodType parameter is set to Months. * Sets the retention period to the number of days if the CustomRetentionPeriodType parameter is set to Days.   Veeam Backup for Microsoft 365 will remove items from the object storage repository once this period is passed. | Int32 | False | Named | False |

<CommonParameters>

This cmdlet supports Microsoft PowerShell common parameters. For more information on common parameters, see the [About CommonParameters](http://go.microsoft.com/fwlink/p/?LinkID=113216) section of Microsoft Docs.

Output Object

The cmdlet returns the [VBOAmazonS3ObjectStorageRepository](vboamazons3objectstoragerepository.md) object that contains settings of S3 Compatible object storage repository.

Examples

![](//img.veeam.com/helpcenter/baggage/arrow_next.svg)Example 1: Modifying Retention Policy Settings

|  |  |
| --- | --- |
| This example shows how to modify retention policy settings for S3 Compatible object storage repository. The repository will have the following settings:   * The retention period is set to 5 years. * Veeam Backup for Microsoft 365 will check the object storage repository and remove the outdated backups on weekends at 11:59 PM.   |  | | --- | | $repository = Get-VBORepository -Name "S3 Compatible Backup"  Set-VBOAmazonS3CompatibleRepository -Repository $repository -RetentionPeriod Years5 -RetentionFrequencyType Daily -DailyType Weekends -DailyTime 23:59:00 |  Perform the following steps:   1. Run the [Get-VBORepository](get-vborepository.md) cmdlet. Save the result to the $repository variable. 2. Run the Set-VBOAmazonS3CompatibleRepository cmdlet. Specify the following settings:  * Set the $repository variable as the Repository parameter value. * Set Years5 as the RetentionPeriod parameter value. * Set Daily as the RetentionFrequencyType parameter value. * Set Weekends as the DailyType parameter value. * Set 23:59:00 as the DailyTime parameter value. |

![](//img.veeam.com/helpcenter/baggage/arrow_next.svg)Example 2: Modifying S3 Compatible Object Storage Name and Retention Policy

|  |  |
| --- | --- |
| This example shows how to change the name of the S3 Compatible Backup object storage repository and configure the clean-up schedule with the following settings:   * The retention period for organization backups is set to 6 months. * Veeam Backup for Microsoft 365 will check the object storage repository and remove the outdated backups every second Monday at 7:59 AM.   |  | | --- | | $repository = Get-VBORepository -Name "S3 Compatible Backup"  Set-VBOAmazonS3CompatibleRepository -Repository $repository -Name "Monthly Reports" -CustomRetentionPeriodType Months -CustomRetentionPeriod 6 -RetentionFrequencyType Monthly -MonthlyDayNumber Second -MonthlyDayOfWeek Monday -MonthlyTime 07:59:00 |  Perform the following steps:   1. Run the [Get-VBORepository](get-vborepository.md) cmdlet. Specify the Name parameter value. Save the result to the $repository variable. 2. Run the Set-VBOAmazonS3CompatibleRepository cmdlet. Specify the following settings:  * Set the $repository variable as the Repository parameter value. * Specify the Name parameter value. * Set Months as the CustomRetentionPeriodType parameter value. * Set 6 as the CustomRetentionPeriod parameter value. * Set Monthly as the RetentionFrequencyType parameter value. * Set Second as the MonthlyDayNumber parameter value. * Set Monday as the MonthlyDayOfWeek parameter value. * Set 07:59:00 as the MonthlyTime parameter value. |

![](//img.veeam.com/helpcenter/baggage/arrow_next.svg)Example 3: Modifying S3 Compatible Object Storage Soft Limit

|  |  |
| --- | --- |
| This example shows how to modify a soft limit for the S3 Compatible Backup object storage repository.  |  | | --- | | $repository = Get-VBORepository -Name "S3 Compatible Backup"  Set-VBOAmazonS3CompatibleRepository -Repository $repository -EnableSizeLimit -SizeLimit 2048 |  Perform the following steps:   1. Run the [Get-VBORepository](get-vborepository.md) cmdlet. Specify the Name parameter value. Save the result to the $repository variable. 2. Run the Set-VBOAmazonS3CompatibleRepository cmdlet. Specify the following settings:  * Set the $repository variable as the Repository parameter value. * Provide the EnableSizeLimit parameter. * Specify the SizeLimit parameter value. |

![](//img.veeam.com/helpcenter/baggage/arrow_next.svg)Example 4: Disabling S3 Compatible Object Storage Soft Limit

|  |  |
| --- | --- |
| This example shows how to disable the soft limit for the S3 Compatible Backup object storage repository.  |  | | --- | | $repository = Get-VBORepository -Name "S3 Compatible Backup"  Set-VBOAmazonS3CompatibleRepository -Repository $repository -EnableSizeLimit:$false |  Perform the following steps:   1. Run the [Get-VBORepository](get-vborepository.md) cmdlet. Specify the Name parameter value. Save the result to the $repository variable. 2. Run the Set-VBOAmazonS3CompatibleRepository cmdlet. Specify the following settings:  * Set the $repository variable as the Repository parameter value. * Set the false value for the EnableSizeLimit parameter. |

![](//img.veeam.com/helpcenter/baggage/arrow_next.svg)Example 5: Trusting Current S3 Compatible Object Storage Self-Signed Certificate

|  |  |
| --- | --- |
| This example shows how configure Veeam Backup for Microsoft 365 to trust current S3 Compatible self-signed certificate.  |  | | --- | | $repository = Get-VBORepository -Name "S3 Compatible Backup"  Set-VBOAmazonS3CompatibleRepository -Repository $repository -TrustServerCertificate |  Perform the following steps:   1. Run the [Get-VBORepository](get-vborepository.md) cmdlet. Specify the Name parameter value. Save the result to the $repository variable. 2. Run the Set-VBOAmazonS3CompatibleRepository cmdlet. Specify the following settings:  * Set the $repository variable as the Repository parameter value. * Provide the TrustServerCertificate parameter. |

Related Commands

[Get-VBORepository](get-vborepository.md)


